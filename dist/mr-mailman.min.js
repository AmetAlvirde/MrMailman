"use strict";function spyAndRepleace(a,b){lock.writeLock(function(b){fs.readFile(markdown,"utf-8",function(c,d){var e;if(c)throw c;R.forEach(function(a){e=R.keys(a)[0],d=d.replace("/".concat(e,"/g"),a[e])},a),b()})})}function deliverMails(a,b,c){R.forEach(function(b){mail.from=a,mail.to=b.mail,mail.subject=c,mail.markdown.path=data,mailer=mailover(transport),console.log(mail),mailer.send(mail)},b)}var fs=require("fs"),mailer,mailover=require("mailover"),R=require("ramda"),ReadWriteLock=require("rwlock");module.exports={deliver:function(a){var b={auth:{}};new ReadWriteLock;b.service=a.auth.service,b.auth.user=a.auth.user,b.auth.pass=a.auth.password,spyAndRepleace(a.content.replaces,a.content.templateURL),deliverMails(a.content.from,a.content.receivers,a.content.subject)}};